set(CANOPY_VERSION      @CANOPY_INSTALL_VERSION@)
set(CANOPY_BUILD_COMMIT @CANOPY_BUILD_COMMIT@)
set(CANOPY_BUILD_NUMBER @CANOPY_BUILD_NUMBER@)
set(CANOPY_SHARED_LIB   @BUILD_SHARED_LIBS@)

@PACKAGE_INIT@

set_and_check(CANOPY_INCLUDE_DIR "@PACKAGE_CANOPY_INCLUDE_INSTALL_DIR@")
set_and_check(CANOPY_LIB_DIR     "@PACKAGE_CANOPY_LIB_INSTALL_DIR@")
set_and_check(CANOPY_BIN_DIR     "@PACKAGE_CANOPY_BIN_INSTALL_DIR@")

find_library(filt_LIBRARY canopy
    REQUIRED
    HINTS ${CANOPY_LIB_DIR}
    NO_CMAKE_FIND_ROOT_PATH
)

add_library(canopy UNKNOWN IMPORTED)
set_target_properties(canopy
    PROPERTIES
        INTERFACE_INCLUDE_DIRECTORIES "${CANOPY_INCLUDE_DIR}"
        #INTERFACE_LINK_LIBRARIES "ggml::ggml;ggml::ggml-base;"
        IMPORTED_LINK_INTERFACE_LANGUAGES "CXX"
        IMPORTED_LOCATION "${filt_LIBRARY}"
        INTERFACE_COMPILE_FEATURES c_std_90
        POSITION_INDEPENDENT_CODE ON)

check_required_components(canopy)